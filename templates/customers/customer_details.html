{% extends "index.html" %}
{% load static %}

{% block links %}

{% endblock links %}



{% block content %}
<!-- Timelime example  -->
<div class="row">
    <div class="col-md-12">
        {% if complaints %}
        {% for complaint in complaints%}
        <!-- The time line -->
        <div class="timeline">
            <!-- timeline time label -->
            <div class="time-label">
                <span class="bg-gradient-blue">{{ complaint.date_submitted|date:"d M Y | H:i" }} hrs</span>
            </div>
            <!-- /.timeline-label -->
            <!-- timeline item -->
            <div>
                <i class="fas fa-envelope bg-blue"></i>
                <div class="timeline-item">
                    <span class="time"><i class="fas fa-clock"></i> {{ complaint.date_submitted|date:"d M Y | H:i" }}
                        hrs</span>
                    <h3 class="timeline-header"><a href="#">{{complaint.customer.name}}:</a>
                        [ {{complaint.complaint_type}} ]
                    </h3>
                    {% if complaint.details.length > 200 %}
                    <div class="timeline-body">
                        {{complaint.details|slice:200}}...
                    </div>
                    <div class="timeline-footer">
                        <a class="btn btn-primary btn-sm">Read more</a>
                    </div>
                    {% else %}
                    <div class="timeline-body">
                        {{complaint.details}}
                    </div>
                    {% endif %}
                </div>
            </div>
            <!-- END timeline item -->
            <!-- timeline item -->
            <div>
                <i class="fas fa-user bg-green"></i>
                <div class="timeline-item">
                    <span class="time"><i class="fas fa-clock"></i>
                        {{ complaint.date_updated|date:"d M Y | H:i" }}</span>
                    <h3 class="timeline-header no-border"> Assigned to: <a href="#">{{ complaint.assigned_to }}</a></h3>
                </div>
            </div>
            <!-- END timeline item -->
            <!-- timeline item -->
            <div>
                <i class="fas fa-tasks bg-yellow"></i>
                <div class="timeline-item">
                    {% if complaint.feedback_set.exists %}
                    {% for feedback in complaint.feedback_set.all %}
                    <span class="time"><i class="fas fa-clock"></i> {{ feedback.date|timesince }} ago</span>
                    <h3 class="timeline-header">
                        <a href="#">{{ feedback.user }}</a> supplied Feedback
                    </h3>
                    <div class="timeline-body">
                        {{ feedback.remarks }}
                    </div>
                    <div class="timeline-footer">
                        <a class="btn btn-warning btn-sm">View comment</a>
                    </div>
                    {% endfor %}
                    {% else %}
                    <span class="time"><i class="fas fa-clock"></i> No feedback yet</span>
                    <h3 class="timeline-header"><a href="#">{{ complaint.assigned_to }}</a> is working on it</h3>
                    <div class="timeline-body">
                        Status: {{ complaint.status }}
                    </div>
                    <div class="timeline-footer">
                        <a class="btn btn-warning btn-sm">View comment</a>
                    </div>
                    {% endif %}
                </div>
            </div>
            <!-- END timeline item -->
            <div>
                <i class="fas fa-clock bg-gray"></i>
            </div>
            <!-- /.col -->
        </div>
        <!-- /.timeline -->
        {% endfor %}
        {% endif %}
    </div>
</div>
{% endblock content %}

{% block scripts %}

{% endblock scripts %}